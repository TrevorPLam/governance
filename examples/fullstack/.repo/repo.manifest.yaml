# /.repo/repo.manifest.yaml

governance:
  version: "1.0.0"
  framework: "ai-native-governance"

repo:
  ships: true
  ship_kind: user_facing_app
  release_protects: [app_stability, login_security]

prerequisites:
  package_manager: npm
  runtime_pinned: true
  platform_tools_required_for_release: false

commands:
  install: "npm install"
  check:quick: "npm run lint && npm run test"
  check:ci: "npm run lint && npm run test && npm run build"
  check:release: "npm run lint && npm run test && npm run build && npm run security:scan"
  check:governance: "governance verify --profile=governance"
  check:boundaries: "node scripts/check-boundaries.js"
  check:security: "node scripts/security-scan.js"

verify_profiles:
  quick: [check:quick]
  ci: [check:ci]
  release: [check:release]
  governance: [check:governance]

tests:
  required_level: unit+integration

budgets:
  mode: both
  enforcement: hard_fail_with_waiver
  fallback_to_default: true

security:
  every_pr: true
  release_includes_security: true
  dependency_vulns_always_hitl: true
  secrets_absolute_prohibition: true
  forbidden_patterns_source: "/.repo/policy/SECURITY_BASELINE.md"

boundaries:
  enforcement: hybrid_checker_plus_manifest_edges
  edges_model: layered_allow_list
  layers:
    ui:
      - "apps/frontend/src/ui/**"
    domain:
      - "apps/frontend/src/domain/**"
      - "apps/backend/src/domain/**"
    data:
      - "apps/backend/src/data/**"
    platform:
      - "apps/backend/src/platform/**"
  features:
    - "apps/frontend/src/features/**"
    - "apps/backend/src/features/**"
  edges: []
